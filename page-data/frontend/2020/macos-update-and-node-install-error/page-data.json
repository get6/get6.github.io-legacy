{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/frontend/2020/macos-update-and-node-install-error/","result":{"data":{"site":{"siteMetadata":{"title":"Jun Wick's Blog","author":{"name":"Sung Jun, Hwang"}}},"markdownRemark":{"id":"91f27465-decf-57cd-b52d-adb136a141f4","excerpt":"macOS Catalina 10.15.7로 업데이트 후에 오랜만에 brew upgrade를 실행 해 node가 15버전이 되었다.(아..안돼..!) 그리고 gatsby develop로 블로그 프로젝트를 실행시키는데 여러 에러가 나왔다. 그래서 node 버전을 올림겸 package…","html":"<p>macOS Catalina 10.15.7로 업데이트 후에 오랜만에 brew upgrade를 실행 해 node가 15버전이 되었다.(아..안돼..!)</p>\n<p>그리고 gatsby develop로 블로그 프로젝트를 실행시키는데 여러 에러가 나왔다.</p>\n<p>그래서 node 버전을 올림겸 package.json파일에서 버전을 전부 최신으로 올렸다.</p>\n<p>sharp 관련해서 에러가 났는데 .node_module과 .cache파일을 삭제 후에 npm i 명령어로 실행하면 아래와 관련한 에러가 나왔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">@sjhwang-MacBookPro ➜ get6.github.io git:<span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">)</span> ✗ <span class=\"token function\">npm</span> i\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> code <span class=\"token number\">1</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> path /Users/sjhwang/GitHub/get6.github.io/node_modules/sharp\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> <span class=\"token builtin class-name\">command</span> failed\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> <span class=\"token builtin class-name\">command</span> <span class=\"token function\">sh</span> -c node-gyp rebuild\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> CC<span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> Release/obj.target/nothing/<span class=\"token punctuation\">..</span>/node-addon-api/nothing.o\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>   LIBTOOL-STATIC Release/nothing.a\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>   TOUCH Release/obj.target/libvips-cpp.stamp\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>   CXX<span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> Release/obj.target/sharp/src/common.o\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info it worked <span class=\"token keyword\">if</span> it ends with ok\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info using node-gyp@7.1.2\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info using node@15.1.0 <span class=\"token operator\">|</span> darwin <span class=\"token operator\">|</span> x64\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info <span class=\"token function\">find</span> Python using Python version <span class=\"token number\">3.9</span>.0 found at <span class=\"token string\">\"/usr/local/opt/python@3.9/bin/python3.9\"</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn /usr/local/opt/python@3.9/bin/python3.9\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args <span class=\"token punctuation\">[</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'/usr/local/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'binding.gyp'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-f'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'make'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-I'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'/Users/sjhwang/GitHub/get6.github.io/node_modules/sharp/build/config.gypi'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-I'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'/usr/local/lib/node_modules/npm/node_modules/node-gyp/addon.gypi'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-I'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'/Users/sjhwang/Library/Caches/node-gyp/15.1.0/include/node/common.gypi'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-Dlibrary=shared_library'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-Dvisibility=default'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-Dnode_root_dir=/Users/sjhwang/Library/Caches/node-gyp/15.1.0'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-Dnode_gyp_dir=/usr/local/lib/node_modules/npm/node_modules/node-gyp'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-Dnode_lib_file=/Users/sjhwang/Library/Caches/node-gyp/15.1.0/&lt;(target_arch)/node.lib'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-Dmodule_root_dir=/Users/sjhwang/GitHub/get6.github.io/node_modules/sharp'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-Dnode_engine=v8'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'--depth=.'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'--no-parallel'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'--generator-output'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'build'</span>,\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args   <span class=\"token string\">'-Goutput_dir=.'</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args <span class=\"token punctuation\">]</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn <span class=\"token function\">make</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp info spawn args <span class=\"token punctuation\">[</span> <span class=\"token string\">'BUILDTYPE=Release'</span>, <span class=\"token string\">'-C'</span>, <span class=\"token string\">'build'</span> <span class=\"token punctuation\">]</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> warning: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: archive library: Release/nothing.a the table of contents is empty <span class=\"token punctuation\">(</span>no object <span class=\"token function\">file</span> members <span class=\"token keyword\">in</span> the library define global symbols<span class=\"token punctuation\">)</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> <span class=\"token punctuation\">..</span>/src/common.cc:23:10: fatal error: <span class=\"token string\">'vips/vips8'</span> <span class=\"token function\">file</span> not found\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> <span class=\"token comment\">#include &lt;vips/vips8></span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>          ^~~~~~~~~~~~\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> <span class=\"token number\">1</span> error generated.\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> make: *** <span class=\"token punctuation\">[</span>Release/obj.target/sharp/src/common.o<span class=\"token punctuation\">]</span> Error <span class=\"token number\">1</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> build error\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> stack Error: <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">make</span><span class=\"token variable\">`</span></span> failed with <span class=\"token builtin class-name\">exit</span> code: <span class=\"token number\">2</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> stack     at ChildProcess.onExit <span class=\"token punctuation\">(</span>/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:194:23<span class=\"token punctuation\">)</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> stack     at ChildProcess.emit <span class=\"token punctuation\">(</span>node:events:327:20<span class=\"token punctuation\">)</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> stack     at Process.ChildProcess._handle.onexit <span class=\"token punctuation\">(</span>node:internal/child_process:277:12<span class=\"token punctuation\">)</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> System Darwin <span class=\"token number\">19.6</span>.0\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> <span class=\"token builtin class-name\">command</span> <span class=\"token string\">\"/usr/local/Cellar/node/15.1.0/bin/node\"</span> <span class=\"token string\">\"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\"</span> <span class=\"token string\">\"rebuild\"</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> cwd /Users/sjhwang/GitHub/get6.github.io/node_modules/sharp\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> node -v v15.1.0\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> node-gyp -v v7.1.2\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> gyp ERR<span class=\"token operator\">!</span> not ok\n\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> A complete log of this run can be found in:\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>     /Users/sjhwang/.npm/_logs/2020-11-09T01_17_55_584Z-debug.log</code></pre></div>\n<p>구글링 하다보니 이렇게 하면 됬다.</p>\n<p>기존에는 설치한 적 없던 vips를 설치해야 했다. 설치는 꽤 걸린다.</p>\n<blockquote>\n<p><strong>그러나 node 15버전인 경우에는 이럴 필요 없이 안정화 버전으로 내려야 한다. (아래 참조)</strong></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rm</span> -rf /Users/<span class=\"token punctuation\">{</span>username<span class=\"token punctuation\">}</span>/.npm/_libvips\nbrew <span class=\"token function\">install</span> vips // If this <span class=\"token builtin class-name\">command</span> throws some error about could not download cfitsio, just ignore.\n<span class=\"token function\">rm</span> -rf node_modules\n<span class=\"token function\">npm</span> i</code></pre></div>\n<p>설치 후 실행하니 또 다른 에러가 나왔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ERROR\n\nProcessing /Users/sjhwang/GitHub/get6.github.io/content/blog/frontend/2020/blog-with-gatsbyjs/images/assets_folder.png failed\n\nOriginal error:\nCommand failed with ENOENT: /Users/sjhwang/GitHub/get6.github.io/node_modules/pngquant-bin/vendor/pngquant - --strip --quality <span class=\"token number\">50</span>-75\nspawn /Users/sjhwang/GitHub/get6.github.io/node_modules/pngquant-bin/vendor/pngquant ENOENT\n\n\n\n\n  WorkerError: Processing /Users/sjhwang/GitHub/get6.github.io/content/blog/frontend/2020/blog-with-gatsbyjs/images/assets_folder.png failed\n  Original error:\n  Command failed with ENOENT: /Users/sjhwang/GitHub/get6.github.io/node_modules/pngquant-bin/vendor/pngquant - --strip --quality <span class=\"token number\">50</span>-75\n  spawn /Users/sjhwang/GitHub/get6.github.io/node_modules/pngquant-bin/vendor/pngquant ENOENT\n  \n  - jobs-manager.ts:318 enqueueJob\n    <span class=\"token punctuation\">[</span>get6.github.io<span class=\"token punctuation\">]</span>/<span class=\"token punctuation\">[</span>gatsby<span class=\"token punctuation\">]</span>/src/utils/jobs-manager.ts:318:21\n  \n  - task_queues:93 processTicksAndRejections\n    node:internal/process/task_queues:93:ㅜ5\n  \n\nnot finished Generating image thumbnails - <span class=\"token number\">0</span>.367s\nnot finished run page queries - <span class=\"token number\">0</span>.329s</code></pre></div>\n<p>node_modules/pngquant-bin/vendor/pngquant 파일이 없었고 결국 node 15 최신 버전에서 안정화 버전인 14.15.0으로 돌아가기로 했다.</p>\n<p>자꾸 알 수 없는 에러가 났던 문제는 node version이었다.</p>\n<p>그 다음부턴 문제 없이 동작한다~</p>","tableOfContents":"","frontmatter":{"title":"mac OS Update와 Node Updagrade 후 발생한 에러","date":"November 09, 2020","description":"mac OS를 업데이트 하면 Xcode를 실행해서 install을 해야하는지 꼭 확인하자","image":null}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/frontend/2020/react-native-start/"},"frontmatter":{"title":"React Native 설치하기","date":"2020-12-19"}}},{"node":{"fields":{"slug":"/frontend/2020/gatsbyjs-blog/"},"frontmatter":{"title":"새롭게 단장한 블로그를 소개합니다!","date":"2020-12-10"}}},{"node":{"fields":{"slug":"/frontend/2020/flutter-analytics-ios/"},"frontmatter":{"title":"Flutter Run할 때 Firebase analytics 에러가 나는 경우","date":"2020-10-30"}}},{"node":{"fields":{"slug":"/frontend/2020/flutter-state-management/"},"frontmatter":{"title":"플러터 상태관리 개념","date":"2020-10-13"}}},{"node":{"fields":{"slug":"/frontend/2020/blog-with-gatsbyjs/"},"frontmatter":{"title":"Gatsby로 Github 블로그 만들어보자!","date":"2020-09-18"}}},{"node":{"fields":{"slug":"/frontend/2020/flutter-firebase-anroid/"},"frontmatter":{"title":"Flutter Firebase android 연동","date":"2020-08-10"}}},{"node":{"fields":{"slug":"/frontend/2020/flutter-firebase-ios/"},"frontmatter":{"title":"Flutter Firebase ios 연동","date":"2020-08-10"}}},{"node":{"fields":{"slug":"/frontend/2020/flutter-run-error-for-package/"},"frontmatter":{"title":"플러터 project 위치 변경 후 에러","date":"2020-07-31"}}},{"node":{"fields":{"slug":"/frontend/2020/flutter-ios-build-error/"},"frontmatter":{"title":"플러터 ios 빌드 에러시 해결","date":"2020-07-15"}}},{"node":{"fields":{"slug":"/frontend/2020/padac-flutter/"},"frontmatter":{"title":"Flutter 개념 잡기","date":"2020-06-08"}}},{"node":{"fields":{"slug":"/frontend/2020/vue-bind-style/"},"frontmatter":{"title":"vue style bind 적용이 안될 때","date":"2020-02-19"}}},{"node":{"fields":{"slug":"/frontend/2020/vue-convert-html/"},"frontmatter":{"title":"에디터로 저장된 문구 vue v-html 치환하기","date":"2020-02-13"}}},{"node":{"fields":{"slug":"/frontend/2020/vuex-so-painful/"},"frontmatter":{"title":"Vuex createNamespacedHelpers 사용법","date":"2020-02-05"}}},{"node":{"fields":{"slug":"/frontend/2020/android-image-name/"},"frontmatter":{"title":"안드로이드 drawable 폴더 이미지명","date":"2020-01-29"}}},{"node":{"fields":{"slug":"/frontend/2020/jekyll-serve-on-local/"},"frontmatter":{"title":"Github pages jekyll 생성 후 로컬에서 build하는 방법","date":"2020-01-04"}}},{"node":{"fields":{"slug":"/frontend/2019/vue-run-serve-error/"},"frontmatter":{"title":"vue npm run serve error가 발생했던 이유","date":"2019-12-23"}}},{"node":{"fields":{"slug":"/frontend/2019/multi-platform-android/"},"frontmatter":{"title":"Kotlin 멀티플랫폼 프로젝트 실행","date":"2019-12-20"}}},{"node":{"fields":{"slug":"/frontend/2019/vue-run-serve-build-error/"},"frontmatter":{"title":"vue run serve error 발생","date":"2019-12-18"}}}]}},"pageContext":{"slug":"/frontend/2020/macos-update-and-node-install-error/","tag":"frontend","previous":{"fields":{"slug":"/tools/vscode/2020/vscode-remove-comments/"},"frontmatter":{"tags":["tools","vscode"]}},"next":{"fields":{"slug":"/backend/2020/test-driven-development/"},"frontmatter":{"tags":["backend","spring"]}}}},"staticQueryHashes":["1146911855","1973561601","3826269039"]}