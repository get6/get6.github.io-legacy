{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/backend/2020/spring-msa-config/","result":{"data":{"site":{"siteMetadata":{"title":"Jun Wick's Blog","author":{"name":"Sung Jun, Hwang"}}},"markdownRemark":{"id":"96c8b8dd-8cb2-54ea-8450-69de9c1d31ce","excerpt":"Spring initializr로 프로젝트를 생성합니다. Developer Tools에서 Spring Boot DevTools, Spring Configuration Processor를 선택합니다. Spring Cloug Config에선 Config Server…","html":"<p>Spring initializr로 프로젝트를 생성합니다.</p>\n<p>Developer Tools에서 Spring Boot DevTools, Spring Configuration Processor를 선택합니다.</p>\n<p>Spring Cloug Config에선 Config Server를 선택합니다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bb4215e00dfd2ad1bdcbb2ffcc20675a/9a86a/spring-initializr-config.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABZ0lEQVQoz42SW3OCMBSE+V1aWyFcQkBE5BbivXY67VSn//9lexKlUiu1D9+cJSSb7EmshxHDYGhjMLAxHDon3WFIjGhOL48/qyWSFLv9HuvtFqvNBuvdzugtja12z6gXS7g8PCM6+jaWyyPwWYWQ4GmBUJPV4EkGHk0QECwI/43lkCGr38DkBxx1hDPfwGkOYGkD5vlw/PZkJ+4b+gE8mlg3CqVsINUCRS2NrtUSeSXNRNvjZM6Nvt5AVy+MWkMOT8SomgWZKBRSmaq/NXMynJc1bdIY3S7801APRHQ5GnEmTjNE0xQ8TgzRdGb+d01uaespLuGpA8byiHH5inH1jqf8Bbb6hKP7GggTtaU1aHt23VdrJAr4UYJMrlAutijUGrlcQqQ5mEjgUpTLkxG9J/yObAcx3IBDTKYUc4aYYk6oBlEMptvROUXXtDcyo1tm/BTLPsfSN3qJc9/s6tnwX5Fu7d7HtekXxnO/a+VmP20AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"spring initializr config\" title=\"spring initializr config\" src=\"/static/bb4215e00dfd2ad1bdcbb2ffcc20675a/fcda8/spring-initializr-config.png\" srcset=\"/static/bb4215e00dfd2ad1bdcbb2ffcc20675a/12f09/spring-initializr-config.png 148w,\n/static/bb4215e00dfd2ad1bdcbb2ffcc20675a/e4a3f/spring-initializr-config.png 295w,\n/static/bb4215e00dfd2ad1bdcbb2ffcc20675a/fcda8/spring-initializr-config.png 590w,\n/static/bb4215e00dfd2ad1bdcbb2ffcc20675a/9a86a/spring-initializr-config.png 792w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<p>그 다음 Config-Server로 지정할 annotation을 입력합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token annotation punctuation\">@EnableConfigServer</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">--</span> 이 부분입니다<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConfigApplication</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ConfigApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>저는 application과 bootstrap을 yaml파일을 사용 할 겁니다.</p>\n<p>bootstrap.yml</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">encrypt</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> hello <span class=\"token comment\"># temporary encrypt key</span>\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">encrypt</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> <span class=\"token comment\"># 암호문 복호화 하지않고 돌려줌 (보안)</span></code></pre></div>\n<p>application.yml</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">active</span><span class=\"token punctuation\">:</span> native\n<span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8888</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">profiles</span><span class=\"token punctuation\">:</span> native\n  <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">native</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">search-locations</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> $<span class=\"token punctuation\">{</span>user.home<span class=\"token punctuation\">}</span>/Documents/Development/config<span class=\"token punctuation\">-</span>repo/account\n            <span class=\"token punctuation\">-</span> $<span class=\"token punctuation\">{</span>user.home<span class=\"token punctuation\">}</span>/Documents/Development/config<span class=\"token punctuation\">-</span>repo/board</code></pre></div>\n<p>여기서는 깃 저장소 연동이 아닌 로컬 경로에 저장된 application.yml을 가져옵니다.</p>\n<p>search-locations를 여러개 적으면 각 디렉토리 별 환경설정 파일을 가져올 수 있습니다.</p>\n<p>config-server가 구동이 되면 8888포트로 <a href=\"http://localhost:8888/%7Bapplication-name%7D/%7Bprofiles\">http://localhost:8888/{application-name}/{profiles</a>} 요청을 받습니다.</p>\n<p>요청을 보낸 서비스는 경로 상에 존재하는 파일을 보내줍니다.</p>\n<p>다음에는 환경설정 파일들이 존재하는 폴더를 설명하겠습니다. &#x3C;— config-repo가 될 폴더입니다.</p>","tableOfContents":"","frontmatter":{"title":"스프링 부트 MSA 프로젝트 - config 서버 구축","date":"May 27, 2020","description":null,"image":null}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/methodology/2021/gof-design-patterns/"},"frontmatter":{"title":"GoF(Gang of Four) Design Patterns 정리","date":"2021-01-17"}}},{"node":{"fields":{"slug":"/backend/2021/nextauth-guide/"},"frontmatter":{"title":"Next.js로 Admin 만들기","date":"2021-01-16"}}},{"node":{"fields":{"slug":"/backend/2020/test-driven-development/"},"frontmatter":{"title":"TDD(TEST DRIVEN DEVELOPMENT)를 SPRING BOOT에 사용하기","date":"2020-12-01"}}},{"node":{"fields":{"slug":"/backend/2020/mapstruct-guide-first/"},"frontmatter":{"title":"MapStruct 에러 해결 첫번째","date":"2020-08-07"}}},{"node":{"fields":{"slug":"/backend/2020/mapstruct-guide-second/"},"frontmatter":{"title":"MapStruct 에러 해결 두번째","date":"2020-08-07"}}},{"node":{"fields":{"slug":"/backend/2020/spring-security-example1/"},"frontmatter":{"title":"스프링 시큐리티 구축 1","date":"2020-06-17"}}},{"node":{"fields":{"slug":"/backend/2020/spring-security/"},"frontmatter":{"title":"스프링 시큐리티 구축","date":"2020-06-13"}}},{"node":{"fields":{"slug":"/backend/2020/java-jpa/"},"frontmatter":{"title":"JPA 정리","date":"2020-06-08"}}},{"node":{"fields":{"slug":"/backend/2020/spring-initializr-gradle-type/"},"frontmatter":{"title":"Spring Initializr Gradle Type 비교","date":"2020-03-24"}}},{"node":{"fields":{"slug":"/backend/2020/type-of-traffic/"},"frontmatter":{"title":"인바운드 트래픽과 아웃바운드 트래픽 설명","date":"2020-03-18"}}},{"node":{"fields":{"slug":"/backend/2020/gradle-summary/"},"frontmatter":{"title":"Gradle 정리","date":"2020-03-16"}}},{"node":{"fields":{"slug":"/backend/2020/nodejs-express-guid/"},"frontmatter":{"title":"Express 가이드","date":"2020-03-13"}}},{"node":{"fields":{"slug":"/backend/2020/backend-roadmap1/"},"frontmatter":{"title":"Backend Developer - How does the internet work?","date":"2020-03-10"}}},{"node":{"fields":{"slug":"/backend/2020/openbanking-test/"},"frontmatter":{"title":"OpenBanking test 적용","date":"2020-03-10"}}},{"node":{"fields":{"slug":"/backend/2020/python-dynamic-parameter/"},"frontmatter":{"title":"Python binds dynamic parameters","date":"2020-02-21"}}},{"node":{"fields":{"slug":"/backend/2020/mybatis-parameter/"},"frontmatter":{"title":"Mybatis parameter 조심해야할 점","date":"2020-02-13"}}},{"node":{"fields":{"slug":"/backend/2020/sql-problem-solving/"},"frontmatter":{"title":"SQL 가상으로 목록 만들기","date":"2020-02-10"}}},{"node":{"fields":{"slug":"/backend/2020/python-exec-example/"},"frontmatter":{"title":"파이썬 exec 함수 사용방법","date":"2020-01-30"}}},{"node":{"fields":{"slug":"/backend/2020/mariadb-rule/"},"frontmatter":{"title":"MariaDB 문자열 합치기","date":"2020-01-21"}}},{"node":{"fields":{"slug":"/backend/2020/vscode-java-clean/"},"frontmatter":{"title":"vscode에서 java clean하는 법","date":"2020-01-20"}}}]}},"pageContext":{"slug":"/backend/2020/spring-msa-config/","tag":"backend","previous":{"fields":{"slug":"/others/2020/change-language/"},"frontmatter":{"tags":["others","chrome"]}},"next":{"fields":{"slug":"/frontend/2020/padac-flutter/"},"frontmatter":{"tags":["frontend","flutter"]}}}},"staticQueryHashes":["1146911855","1973561601","3826269039"]}