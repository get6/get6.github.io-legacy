<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/24f5c4934916282a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/24f5c4934916282a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cf121497002c184d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cf121497002c184d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-591bb7ec51acdc0d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-22f980d027594622.js" defer=""></script><script src="/_next/static/chunks/675-717e3cc8fb67a947.js" defer=""></script><script src="/_next/static/chunks/194-b74e21e59d8a75e2.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5B...slug%5D-e07d71ec7cb54eb2.js" defer=""></script><script src="/_next/static/48cndNy0EEL7Rh6WrBUSX/_buildManifest.js" defer=""></script><script src="/_next/static/48cndNy0EEL7Rh6WrBUSX/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="absolute w-full pt-3"><div class="container mx-auto flex flex-wrap"><a class="w-2/6 text-lg font-bold" href="/">ğŸŒ Sunhwang&#x27;s blog</a><ul class="flex grow justify-between"><li><a class="hover:underline hover:underline-offset-8 " href="/categories">Categories</a></li><li><a class="hover:underline hover:underline-offset-8 " href="/tags">Tags</a></li><li><a class="hover:underline hover:underline-offset-8 " href="/books">Books</a></li><li><a class="hover:underline hover:underline-offset-8 " href="/about">About me</a></li></ul></div></nav><main><div class="container mx-auto pt-10"><article class="mb-32"><h1 class="mb-12 text-center text-5xl font-bold leading-tight tracking-tighter md:text-left md:text-7xl md:leading-none lg:text-4xl">MapStruct ì—ëŸ¬ í•´ê²° ì²«ë²ˆì§¸</h1><div class="mb-8 sm:mx-0 md:mb-16"><div class="sm:mx-0"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0"><img alt="Cover Image for MapStruct ì—ëŸ¬ í•´ê²° ì²«ë²ˆì§¸" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="shadow-sm" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Cover Image for MapStruct ì—ëŸ¬ í•´ê²° ì²«ë²ˆì§¸" src="" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="shadow-sm" loading="lazy"/></noscript></span></div></div><div class="mx-auto max-w-2xl"><div class="mb-6 text-lg"><time dateTime="2020-08-07">August	7, 2020</time></div></div><div class="mx-auto max-w-2xl"><div class="markdown-styles_markdown__h_8de"><p>Mapstructë¥¼ ì‹¤ë¬´ì— ì‚¬ìš©í•´ë³´ë©´ì„œ ê²ªì€ ê²½í—˜ì„ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤.</p>
<p><a href="https://mapstruct.org/">MapStruct</a>ì— Get Startedì—ëŠ” ì •ë§ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
DTO &#x3C;-> Entityë¥¼ ë³€ê²½í•´ì£¼ëŠ” ê°„ë‹¨í•œ library ì´ì§€ë§Œ í™•ì¥ì„±ì€ ëŒ€ë‹¨í•©ë‹ˆë‹¤.</p>
<p>ë‹¨ìˆœ ì‘ì—…ì„ build ë‹¨ê³„ì—ì„œ ìƒì„±í•´ì£¼ì–´ {Entity}Mapper interfaceë¥¼ {Entity}MapperImplë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´ User Entityì— UserRoleì´ ìˆë‹¤ê³  ê°€ì • í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>ê³µì‹ í™ˆí˜ì´ì§€ì— ë” ìì„¸í•œ ì„¤ëª…ì´ ìˆì§€ë§Œ ì €í¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ìŠµì€ ì´ë ‡ìŠµë‹ˆë‹¤.</p>
<pre><code>@Mapper(uses = {UserRoleMapper.class}, unmappedTargetPolicy = ReportingPolicy.ERROR, nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)
public interface UserMapper {

  /**
   * UserMapperëŠ” ì—°ê´€ Entity Mapperë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. users ì†í•œ Mapper ì—ëŠ” @Mapping(target = "user", ignore = true) ì„¤ì • ë˜ì–´ìˆìŠµë‹ˆë‹¤.
   */
  UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);

  UserDTO toDTO(User user);

  User toEntity(UserDTO userDTO);
</code></pre>
<p>@Mapper annotationì— ì íŒ ë¶€ë¶„ì„ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
<p>users - ë‹¤ë¥¸ Mapper íŒŒì¼ì„ ì°¸ì¡°í•˜ë ¤ê³  í•  ë•Œ, ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>usersì— ì‚¬ìš©ëœ UserRoleMapper.classì…ë‹ˆë‹¤.</p>
<pre><code>@Mapper(uses = {RoleMapper.class}, unmappedTargetPolicy = ReportingPolicy.ERROR, nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)
public interface UserRoleMapper {

  UserRoleMapper INSTANCE = Mappers.getMapper(UserRoleMapper.class);

  @Mapping(target = "user", ignore = true)
  UserRoleDTO toDTO(UserRole userRole);

  @Mapping(target = "user", ignore = true)
  UserRole toEntity(UserRoleDTO userRoleDTO);
}
</code></pre>
<p>UserRoleMapperì—ì„  UserRole ì•ˆì— ìˆëŠ” userê°€ ë³€í™˜ë˜ëŠ”ê±¸ ë§‰ì•„ì•¼ ë¬´í•œ ì°¸ì¡°ì— ë¹ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë¦¬ê³  Userê°€ ì €ì¥ë˜ëŠ” ê¸°ì¤€ìœ¼ë¡œ Entityë³€í™˜ í›„ UserRoleì„ setUserRole í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë‹´ì•„ ì£¼ì‹œë©´ ì €ì¥ì´ ë˜ì–´ ì•„ì§ ë¬¸ì œê°€ ëœ ìƒí™©ì€ ë°œê²¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.<br>
ì•„ì§ ë°œê²¬í•˜ì§€ ëª»í•œ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ì €ë„ ì•Œê³ ì‹¶ì–´ìš”..)</p>
<p>unmappedTargetPolicy - DTOì™€ Entityì— ì„ ì–¸ëœ ë³€ìˆ˜ë“¤ì´ ignore = trueë¡œ ë˜ì–´ìˆì§€ ì•Šì€ ë³€ìˆ˜ê°€ ë³€í™˜ì´ ì•ˆë˜ëŠ” ê²½ìš° ì—ëŸ¬ê°€ ë‚˜ë©° Run ë˜ì§€ ì•Šê²Œí•©ë‹ˆë‹¤.</p>
<p>nullValueMappingStrategy - nullì¸ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™” í•´ì¤ë‹ˆë‹¤. Entityë¡œ ë³€í™˜ëœ ê°ì²´ì—ì„œ .get{OtherEntity}()ë¥¼ í• ë•Œ NullpointExceptionì„ ë°©ì§€í•´ì¤ë‹ˆë‹¤.</p>
<h4>ë³€ê²½ì‚¬í•­ 2020.08.12</h4>
<p>nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)ë¥¼ ì‚¬ìš©í•œ Mapperë¥¼ ì´ìš©í•´ JPA Repository .save(Entity êµ¬í˜„ ê°ì²´)í•¨ìˆ˜ë¥¼ ì‹¤í–‰í–ˆì§€ë§Œ ì´ìƒí•œ ë™ì‘ì´ ìƒê²¼ìŠµë‹ˆë‹¤.<br>
ë¬¸ì œëŠ” ìœ„ ì„¤ì •ì„ í†µí•´ í•­ìƒ NullPointExceptionì„ ë°©ì§€í•˜ê³ ì ê°ì²´ë¥¼ ë§Œë“­ë‹ˆë‹¤.<br>
ê·¸ëŸ° ê²½ìš° JPAìª½ì—ì„œ ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë˜ê³  ì—°ê´€ ê°ì²´ë„ Nullì´ ì•„ë‹ˆì—¬ì„œ Nullì´ ì•„ë‹ˆì§€ë§Œ í…… ë¹ˆ ê°ì²´ê°€ ì €ì¥ë  ê²½ìš°ì—ë„ insertë¥¼ ì‹œë„í•˜ë ¤ê³  í•©ë‹ˆë‹¤.<br>
ì´ëŸ¬í•œ ìƒí™©ë•Œë¬¸ì— ê±°ì˜ ëª¨ë“  ê²½ìš°ì— ì € ì„¤ì •ì„ í•´ì œí–ˆìŠµë‹ˆë‹¤.</p>
<hr>
<p>public abstract class UserMapperë¡œ ë§Œë“¤ì–´ì„œ beforeMappingì´ë‚˜ afterMappingì„ í†µí•´ ì œì–´ë„ ê°€ëŠ¥í•˜ì§€ë§Œ,<br>
í•œ íŒŒì¼ì— ë‹¤ë¥¸ Entityì‘ì—…ì„ ëª°ì•„ì£¼ëŠ” ê²ƒì´ ì˜³ì€ ê²ƒì¸ê°€ í•˜ëŠ” ìƒê°ì´ ë“¤ì–´ì„œ ê° Entityë§ˆë‹¤ Mapperë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ Domainë³„ íŒŒì¼êµ¬ì¡°ëŠ”</p>
<ul>
<li>{domain}
<ul>
<li>controller</li>
<li>model
<ul>
<li>dto</li>
<li>entity</li>
<li>mapper &#x3C;- ì—¬ê¸°ì— MapStruct íŒŒì¼ì´ domainë³„ë¡œ ë“¤ì–´ê°€ ìˆìŠµë‹ˆë‹¤.</li>
<li>validator</li>
</ul>
</li>
<li>repository</li>
<li>service</li>
</ul>
</li>
</ul>
<p>ì´ëŸ° íŒŒì¼êµ¬ì¡°ë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<p>UserMapper.INSTANCE.toEntity, toDTO í•¨ìˆ˜ëŠ” DDDíŒ¨í„´ìœ¼ë¡œ ê° Entityì—ì„œ ìˆ˜í–‰í•˜ë„ë¡ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ì¤ë‹ˆë‹¤.</p>
<pre><code>@Entity
public class User {

    ... ë‹¤ë¥¸ ë¶€ë¶„ ìƒëµ

    public static User toEntity(UserDTO userDTO) {
        return UserMapper.INSTANCE.toEntity(userDTO);
    }
}
</code></pre>
<p>DTO &#x3C;-> Entityë¥¼ ë³€í™˜í•´ì£¼ëŠ” ì‘ì—…ì„ í•˜ê²Œë˜ë©´ User ê°ì²´ (DTO, Entity) ì•ˆì—ëŠ” <code>List&#x3C;UserRoleDTO> userRoles, Set&#x3C;UserRole> userRoles</code>ë¡œ ë˜ì–´ìˆëŠ” ë¶€ë¶„ê¹Œì§€ë„ ë³€í™˜ì„ í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>ê·¸ëŸ¬ë‚˜ Request ìš”ì²­ìœ¼ë¡œ ë„˜ì–´ì˜¨ UserDTO ê°ì²´ ì•ˆì— userRolesë¥¼ ìˆœì„œëŒ€ë¡œ ë„£ê³ ì‹¶ì€ ê²½ìš° ì–´ë–»ê²Œ í• ê¹Œìš”?
ì™œ DTOëŠ” List interfaceì´ê³  Entityì—ëŠ” Setì¼ê¹Œìš”?</p>
</blockquote>
<p>DTOê°€ Requestë¡œ ë„˜ì–´ì˜¬ë•Œ Setìœ¼ë¡œ ì„ ì–¸ë˜ì–´ ìˆëŠ” ë³€ìˆ˜ëŠ” ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ ì•Šì•„ ì •ë ¬í•œ ì±„ë¡œ ë³´ë‚´ë„ ë’¤ì£½ë°•ì£½ìœ¼ë¡œ ì˜µë‹ˆë‹¤.<br>
ê·¸ëŸ° ì´ìœ ë¡œ Listë¡œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<p>Entityì—ì„  ì¤‘ë³µì„ ë§‰ê¸° ìœ„í•´ Setìœ¼ë¡œ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤.</p>
<p>Set interface êµ¬í˜„ classëŠ” HashSetìœ¼ë¡œ ë˜ì–´ìˆì–´ Listë¡œ ì¼ê´„ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì²˜ìŒì—ëŠ” DTOìª½ì„ Listë¡œë§Œ êµ¬í˜„í•˜ê³  ë‚˜ì„œ í™•ì¸í•´ë³´ë©´ ìˆœì„œëŒ€ë¡œ ì™€ì„œ ì´ì œ DBì— ì œëŒ€ë¡œ ë“¤ì–´ê°€ê² ì§€ ì‹¶ì–´ì„œ DBì— ì €ì¥ì„ ëª‡ë²ˆ í…ŒìŠ¤íŠ¸ í•´ë³´ë‹ˆ ëª‡ê±´ì€ ì •ìƒì´ì—ˆì§€ë§Œ ì—­ì‹œ ë’¤ì£½ë°•ì£½ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì›ì¸ì„ ì°¾ê³ ë³´ë‹ˆ DTOê°€ Entityë¡œ ë³€í™”ë˜ëŠ” ì‹œì ì— <code>Set&#x3C;UserRole> userRoles</code>ê°€ HashSetìœ¼ë¡œ ìƒì„±ë˜ì–´ì„œ ê·¸ë¬ìŠµë‹ˆë‹¤.</p>
<p>Entityë¥¼ SortedSetìœ¼ë¡œ í•´ì•¼í•˜ë‚˜ ì‹¶ì—ˆì§€ë§Œ, JPAê°€ í—ˆìš©í•˜ì§€ ì•Šì•„ì„œ Setìœ¼ë¡œ ìœ ì§€í–ˆìŠµë‹ˆë‹¤.</p>
<p>ê²°êµ­ LinkedHashSetì„ ì´ìš©í•´ List ìˆœì„œë¥¼ ì´ì–´ë°›ì•„ì•¼ í•˜ëŠ” ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì›í•˜ë˜ ìƒí™©ì´ì—ˆì§€ë§Œ êµ¬í˜„ëœ {Entity}MapperImplì„ ì‚´í´ë³´ë©´ Setì€ HashSetìœ¼ë¡œ ë˜ì–´ìˆê³  interfaceë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì•Œì•„ì„œ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ì†ì„ ëŒˆ ìˆ˜ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì €ëŠ” ì •ë ¬ì„ ë”°ë¡œ êµ¬í˜„í•˜ê³  ì‹¶ì§€ ì•Šì•˜ê³ , MapStructë¥¼ í†µí•´ ì‰½ê²Œ ë°”ê¾¸ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.</p>
<h4>í•´ê²°ì±…ì€</h4>
<p>UserRoleMapperì— Collection ë³€í™˜ í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆê³  UserMapperì—</p>
<pre><code>LinkedHashSet&#x3C;UserRole> userRoleDTOToEntityLinkedHashSet(Collection&#x3C;UserRoleDTO> userRoleDTOs);
</code></pre>
<p>ì´ëŸ°ì‹ìœ¼ë¡œ Collection ë³€ìˆ˜ë§ˆë‹¤ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ì£¼ê²Œë˜ë©´ ì´ í•¨ìˆ˜ë¥¼ ì°¸ì¡°í•˜ì—¬ forë¬¸ì„ ë°˜ë³µí•©ë‹ˆë‹¤.<br>
ë•ë¶„ì— í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.<br>
ê°œë°œ ì´ë€ê²Œ ê°€ë”ì€ ë‹µë‹µí•˜ë”ë¼ë„ ì´ëŸ°ì‹ìœ¼ë¡œ ë°©ë²•ì„ ì°¾ê²Œë˜ë©´ ì°¸ ê¸°ë¶„ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤.
ë¬¸ì œ ì—†ì´ ëŒì•„ê°€ê¸° ìœ„í•´ì„  <a href="https://get6.github.io/2020/08/07/mapstruct-guide-second.html">MapStruc ì—ëŸ¬ í•´ê²° ë‘ë²ˆì§¸</a>ì— ë‚˜ì˜¨ ë°©ë²•ë„ í•„ìš”í•©ë‹ˆë‹¤.</p>
</div></div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"MapStruct ì—ëŸ¬ í•´ê²° ì²«ë²ˆì§¸","date":"2020-08-07","slug":"backend/2020/mapstruct-guide-first/index","content":"\u003cp\u003eMapstructë¥¼ ì‹¤ë¬´ì— ì‚¬ìš©í•´ë³´ë©´ì„œ ê²ªì€ ê²½í—˜ì„ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://mapstruct.org/\"\u003eMapStruct\u003c/a\u003eì— Get Startedì—ëŠ” ì •ë§ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\nDTO \u0026#x3C;-\u003e Entityë¥¼ ë³€ê²½í•´ì£¼ëŠ” ê°„ë‹¨í•œ library ì´ì§€ë§Œ í™•ì¥ì„±ì€ ëŒ€ë‹¨í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë‹¨ìˆœ ì‘ì—…ì„ build ë‹¨ê³„ì—ì„œ ìƒì„±í•´ì£¼ì–´ {Entity}Mapper interfaceë¥¼ {Entity}MapperImplë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì˜ˆë¥¼ ë“¤ì–´ User Entityì— UserRoleì´ ìˆë‹¤ê³  ê°€ì • í•´ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê³µì‹ í™ˆí˜ì´ì§€ì— ë” ìì„¸í•œ ì„¤ëª…ì´ ìˆì§€ë§Œ ì €í¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ìŠµì€ ì´ë ‡ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e@Mapper(uses = {UserRoleMapper.class}, unmappedTargetPolicy = ReportingPolicy.ERROR, nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)\npublic interface UserMapper {\n\n  /**\n   * UserMapperëŠ” ì—°ê´€ Entity Mapperë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. users ì†í•œ Mapper ì—ëŠ” @Mapping(target = \"user\", ignore = true) ì„¤ì • ë˜ì–´ìˆìŠµë‹ˆë‹¤.\n   */\n  UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\n\n  UserDTO toDTO(User user);\n\n  User toEntity(UserDTO userDTO);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e@Mapper annotationì— ì íŒ ë¶€ë¶„ì„ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eusers - ë‹¤ë¥¸ Mapper íŒŒì¼ì„ ì°¸ì¡°í•˜ë ¤ê³  í•  ë•Œ, ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eusersì— ì‚¬ìš©ëœ UserRoleMapper.classì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e@Mapper(uses = {RoleMapper.class}, unmappedTargetPolicy = ReportingPolicy.ERROR, nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)\npublic interface UserRoleMapper {\n\n  UserRoleMapper INSTANCE = Mappers.getMapper(UserRoleMapper.class);\n\n  @Mapping(target = \"user\", ignore = true)\n  UserRoleDTO toDTO(UserRole userRole);\n\n  @Mapping(target = \"user\", ignore = true)\n  UserRole toEntity(UserRoleDTO userRoleDTO);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUserRoleMapperì—ì„  UserRole ì•ˆì— ìˆëŠ” userê°€ ë³€í™˜ë˜ëŠ”ê±¸ ë§‰ì•„ì•¼ ë¬´í•œ ì°¸ì¡°ì— ë¹ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê·¸ë¦¬ê³  Userê°€ ì €ì¥ë˜ëŠ” ê¸°ì¤€ìœ¼ë¡œ Entityë³€í™˜ í›„ UserRoleì„ setUserRole í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë‹´ì•„ ì£¼ì‹œë©´ ì €ì¥ì´ ë˜ì–´ ì•„ì§ ë¬¸ì œê°€ ëœ ìƒí™©ì€ ë°œê²¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\u003cbr\u003e\nì•„ì§ ë°œê²¬í•˜ì§€ ëª»í•œ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ì €ë„ ì•Œê³ ì‹¶ì–´ìš”..)\u003c/p\u003e\n\u003cp\u003eunmappedTargetPolicy - DTOì™€ Entityì— ì„ ì–¸ëœ ë³€ìˆ˜ë“¤ì´ ignore = trueë¡œ ë˜ì–´ìˆì§€ ì•Šì€ ë³€ìˆ˜ê°€ ë³€í™˜ì´ ì•ˆë˜ëŠ” ê²½ìš° ì—ëŸ¬ê°€ ë‚˜ë©° Run ë˜ì§€ ì•Šê²Œí•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003enullValueMappingStrategy - nullì¸ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™” í•´ì¤ë‹ˆë‹¤. Entityë¡œ ë³€í™˜ëœ ê°ì²´ì—ì„œ .get{OtherEntity}()ë¥¼ í• ë•Œ NullpointExceptionì„ ë°©ì§€í•´ì¤ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch4\u003eë³€ê²½ì‚¬í•­ 2020.08.12\u003c/h4\u003e\n\u003cp\u003enullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)ë¥¼ ì‚¬ìš©í•œ Mapperë¥¼ ì´ìš©í•´ JPA Repository .save(Entity êµ¬í˜„ ê°ì²´)í•¨ìˆ˜ë¥¼ ì‹¤í–‰í–ˆì§€ë§Œ ì´ìƒí•œ ë™ì‘ì´ ìƒê²¼ìŠµë‹ˆë‹¤.\u003cbr\u003e\në¬¸ì œëŠ” ìœ„ ì„¤ì •ì„ í†µí•´ í•­ìƒ NullPointExceptionì„ ë°©ì§€í•˜ê³ ì ê°ì²´ë¥¼ ë§Œë“­ë‹ˆë‹¤.\u003cbr\u003e\nê·¸ëŸ° ê²½ìš° JPAìª½ì—ì„œ ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë˜ê³  ì—°ê´€ ê°ì²´ë„ Nullì´ ì•„ë‹ˆì—¬ì„œ Nullì´ ì•„ë‹ˆì§€ë§Œ í…… ë¹ˆ ê°ì²´ê°€ ì €ì¥ë  ê²½ìš°ì—ë„ insertë¥¼ ì‹œë„í•˜ë ¤ê³  í•©ë‹ˆë‹¤.\u003cbr\u003e\nì´ëŸ¬í•œ ìƒí™©ë•Œë¬¸ì— ê±°ì˜ ëª¨ë“  ê²½ìš°ì— ì € ì„¤ì •ì„ í•´ì œí–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003epublic abstract class UserMapperë¡œ ë§Œë“¤ì–´ì„œ beforeMappingì´ë‚˜ afterMappingì„ í†µí•´ ì œì–´ë„ ê°€ëŠ¥í•˜ì§€ë§Œ,\u003cbr\u003e\ní•œ íŒŒì¼ì— ë‹¤ë¥¸ Entityì‘ì—…ì„ ëª°ì•„ì£¼ëŠ” ê²ƒì´ ì˜³ì€ ê²ƒì¸ê°€ í•˜ëŠ” ìƒê°ì´ ë“¤ì–´ì„œ ê° Entityë§ˆë‹¤ Mapperë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê·¸ë˜ì„œ Domainë³„ íŒŒì¼êµ¬ì¡°ëŠ”\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e{domain}\n\u003cul\u003e\n\u003cli\u003econtroller\u003c/li\u003e\n\u003cli\u003emodel\n\u003cul\u003e\n\u003cli\u003edto\u003c/li\u003e\n\u003cli\u003eentity\u003c/li\u003e\n\u003cli\u003emapper \u0026#x3C;- ì—¬ê¸°ì— MapStruct íŒŒì¼ì´ domainë³„ë¡œ ë“¤ì–´ê°€ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003evalidator\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003erepository\u003c/li\u003e\n\u003cli\u003eservice\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eì´ëŸ° íŒŒì¼êµ¬ì¡°ë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eUserMapper.INSTANCE.toEntity, toDTO í•¨ìˆ˜ëŠ” DDDíŒ¨í„´ìœ¼ë¡œ ê° Entityì—ì„œ ìˆ˜í–‰í•˜ë„ë¡ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ì¤ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e@Entity\npublic class User {\n\n    ... ë‹¤ë¥¸ ë¶€ë¶„ ìƒëµ\n\n    public static User toEntity(UserDTO userDTO) {\n        return UserMapper.INSTANCE.toEntity(userDTO);\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDTO \u0026#x3C;-\u003e Entityë¥¼ ë³€í™˜í•´ì£¼ëŠ” ì‘ì—…ì„ í•˜ê²Œë˜ë©´ User ê°ì²´ (DTO, Entity) ì•ˆì—ëŠ” \u003ccode\u003eList\u0026#x3C;UserRoleDTO\u003e userRoles, Set\u0026#x3C;UserRole\u003e userRoles\u003c/code\u003eë¡œ ë˜ì–´ìˆëŠ” ë¶€ë¶„ê¹Œì§€ë„ ë³€í™˜ì„ í•´ì¤ë‹ˆë‹¤.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eê·¸ëŸ¬ë‚˜ Request ìš”ì²­ìœ¼ë¡œ ë„˜ì–´ì˜¨ UserDTO ê°ì²´ ì•ˆì— userRolesë¥¼ ìˆœì„œëŒ€ë¡œ ë„£ê³ ì‹¶ì€ ê²½ìš° ì–´ë–»ê²Œ í• ê¹Œìš”?\nì™œ DTOëŠ” List interfaceì´ê³  Entityì—ëŠ” Setì¼ê¹Œìš”?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eDTOê°€ Requestë¡œ ë„˜ì–´ì˜¬ë•Œ Setìœ¼ë¡œ ì„ ì–¸ë˜ì–´ ìˆëŠ” ë³€ìˆ˜ëŠ” ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ ì•Šì•„ ì •ë ¬í•œ ì±„ë¡œ ë³´ë‚´ë„ ë’¤ì£½ë°•ì£½ìœ¼ë¡œ ì˜µë‹ˆë‹¤.\u003cbr\u003e\nê·¸ëŸ° ì´ìœ ë¡œ Listë¡œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eEntityì—ì„  ì¤‘ë³µì„ ë§‰ê¸° ìœ„í•´ Setìœ¼ë¡œ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eSet interface êµ¬í˜„ classëŠ” HashSetìœ¼ë¡œ ë˜ì–´ìˆì–´ Listë¡œ ì¼ê´„ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì²˜ìŒì—ëŠ” DTOìª½ì„ Listë¡œë§Œ êµ¬í˜„í•˜ê³  ë‚˜ì„œ í™•ì¸í•´ë³´ë©´ ìˆœì„œëŒ€ë¡œ ì™€ì„œ ì´ì œ DBì— ì œëŒ€ë¡œ ë“¤ì–´ê°€ê² ì§€ ì‹¶ì–´ì„œ DBì— ì €ì¥ì„ ëª‡ë²ˆ í…ŒìŠ¤íŠ¸ í•´ë³´ë‹ˆ ëª‡ê±´ì€ ì •ìƒì´ì—ˆì§€ë§Œ ì—­ì‹œ ë’¤ì£½ë°•ì£½ì´ì—ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì›ì¸ì„ ì°¾ê³ ë³´ë‹ˆ DTOê°€ Entityë¡œ ë³€í™”ë˜ëŠ” ì‹œì ì— \u003ccode\u003eSet\u0026#x3C;UserRole\u003e userRoles\u003c/code\u003eê°€ HashSetìœ¼ë¡œ ìƒì„±ë˜ì–´ì„œ ê·¸ë¬ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eEntityë¥¼ SortedSetìœ¼ë¡œ í•´ì•¼í•˜ë‚˜ ì‹¶ì—ˆì§€ë§Œ, JPAê°€ í—ˆìš©í•˜ì§€ ì•Šì•„ì„œ Setìœ¼ë¡œ ìœ ì§€í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê²°êµ­ LinkedHashSetì„ ì´ìš©í•´ List ìˆœì„œë¥¼ ì´ì–´ë°›ì•„ì•¼ í•˜ëŠ” ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì›í•˜ë˜ ìƒí™©ì´ì—ˆì§€ë§Œ êµ¬í˜„ëœ {Entity}MapperImplì„ ì‚´í´ë³´ë©´ Setì€ HashSetìœ¼ë¡œ ë˜ì–´ìˆê³  interfaceë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì•Œì•„ì„œ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ì†ì„ ëŒˆ ìˆ˜ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì €ëŠ” ì •ë ¬ì„ ë”°ë¡œ êµ¬í˜„í•˜ê³  ì‹¶ì§€ ì•Šì•˜ê³ , MapStructë¥¼ í†µí•´ ì‰½ê²Œ ë°”ê¾¸ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch4\u003eí•´ê²°ì±…ì€\u003c/h4\u003e\n\u003cp\u003eUserRoleMapperì— Collection ë³€í™˜ í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆê³  UserMapperì—\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eLinkedHashSet\u0026#x3C;UserRole\u003e userRoleDTOToEntityLinkedHashSet(Collection\u0026#x3C;UserRoleDTO\u003e userRoleDTOs);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ëŸ°ì‹ìœ¼ë¡œ Collection ë³€ìˆ˜ë§ˆë‹¤ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ì£¼ê²Œë˜ë©´ ì´ í•¨ìˆ˜ë¥¼ ì°¸ì¡°í•˜ì—¬ forë¬¸ì„ ë°˜ë³µí•©ë‹ˆë‹¤.\u003cbr\u003e\në•ë¶„ì— í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\u003cbr\u003e\nê°œë°œ ì´ë€ê²Œ ê°€ë”ì€ ë‹µë‹µí•˜ë”ë¼ë„ ì´ëŸ°ì‹ìœ¼ë¡œ ë°©ë²•ì„ ì°¾ê²Œë˜ë©´ ì°¸ ê¸°ë¶„ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤.\në¬¸ì œ ì—†ì´ ëŒì•„ê°€ê¸° ìœ„í•´ì„  \u003ca href=\"https://get6.github.io/2020/08/07/mapstruct-guide-second.html\"\u003eMapStruc ì—ëŸ¬ í•´ê²° ë‘ë²ˆì§¸\u003c/a\u003eì— ë‚˜ì˜¨ ë°©ë²•ë„ í•„ìš”í•©ë‹ˆë‹¤.\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/posts/[...slug]","query":{"slug":["backend","2020","mapstruct-guide-first","index"]},"buildId":"48cndNy0EEL7Rh6WrBUSX","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>