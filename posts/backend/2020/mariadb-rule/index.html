<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/13bc55abfb39ab26.css" as="style"/><link rel="stylesheet" href="/_next/static/css/13bc55abfb39ab26.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cf21075dda946acb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cf21075dda946acb.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-591bb7ec51acdc0d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4cb5de2196e5860f.js" defer=""></script><script src="/_next/static/chunks/675-717e3cc8fb67a947.js" defer=""></script><script src="/_next/static/chunks/194-b74e21e59d8a75e2.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5B...slug%5D-83458223dad3a832.js" defer=""></script><script src="/_next/static/AfQh34Lrjpt4zlooEaMIq/_buildManifest.js" defer=""></script><script src="/_next/static/AfQh34Lrjpt4zlooEaMIq/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="absolute w-full pt-3"><div class="container mx-auto flex flex-wrap"><a class="w-2/6 text-lg font-bold" href="/">🌎 Sunhwang&#x27;s blog</a><ul class="flex grow justify-between"><li><a class="hover:underline hover:underline-offset-8 " href="/series">Series</a></li><li><a class="hover:underline hover:underline-offset-8 " href="/tags">Tags</a></li><li><a class="hover:underline hover:underline-offset-8 " href="/books">Books</a></li><li><a class="hover:underline hover:underline-offset-8 " href="/about">About me</a></li></ul></div></nav><main><div class="container mx-auto pt-10"><article class="mb-32"><div class="mx-auto flex max-w-5xl justify-start align-middle"><h1 class="mt-20 mb-6 text-5xl font-bold leading-tight tracking-tighter md:text-left md:text-7xl md:leading-none lg:text-4xl">MariaDB 문자열 합치기</h1></div><div class="mb-8 sm:mx-0 md:mb-16"><div class="sm:mx-0"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0"><img alt="Cover Image for MariaDB 문자열 합치기" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="shadow-sm" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Cover Image for MariaDB 문자열 합치기" src="" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="shadow-sm" loading="lazy"/></noscript></span></div></div><div class="mx-auto flex max-w-5xl justify-end"><div class="mb-4 text-sm text-gray-600 underline underline-offset-8"><time dateTime="2020-01-21">January 1월	21일, 2020</time></div></div><div class="mx-auto max-w-5xl"><article class="markdown-styles_markdown__h_8de"><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Contents</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<p>프로젝트를 DynamoDB와 MariaDB를 섞어서 쓰고있다.<br>
파일경로를 aws서버에서 가져와야 하기때문에 다들 DB조회 후 한 건마다 돌려서 공통 함수를 호출해서 파일 경로를 만들어줬기 때문에 나도 그렇게 해야하나 싶었다가도<br>
내가 해야할 메뉴에는 이미지가 있는 테이블이 5개 * 이미지 관련 컬럼 3~8개였기 때문에 쉬운 방법을 찾아보다가 글을 쓴다.</p>
<p>처음 생각했던 방법은 예를들어 Model객체에다가 getter에다가 해당 메소드를 호출해 데이터를 조합 후 보내면 되겠다 생각했다.</p>
<p>properties에 경로가 지정되어있기 때문에 String fileURL이라는 변수에다가 <code>$value("${some url"})</code> 를 선언하고 받아보니 null이였다.</p>
<p>그래서 두번째 시도에서는 해당 Model에다가 해당 메소드가 있는 Util객체를 @Autowired를 선언해서 하니 안됬었다.</p>
<p>두 방법 다 예전에 안됬던 기억이어서 혹시나하고 해봤는데 역시나였다.<br>
함수를 만들어 for문을 돌리기에는 자바가 변수가 고정적이라 일일히 수작업으로 하기에는 개발자스럽지 않은 느낌이여서 Controller에서 조회하기 전에 경로를 searchModel같은 곳에 담아두고 SQL 쿼리 상의 더해주면 쉽게 해결되겠다 싶었다!</p>
<p>기대와는 달리 #{filURL} + some_file_route는 계속해서 null을 반환했다.<br>
뭔가싶어 찾아보니 MariaDB는 문자열에 숫자가 있는건 숫자끼리 더하고 데이터가 null이거나 이상할때는 null을 반환했다.<br>
MariaDB는 <code>CONCAT('1','2','3','4','5'...)</code> 이런식으로 해야만 문자열을 합칠 수 있었다.<br>
null값이 있으면 null로 반환되어 경로가 이상할 일은 없어 다행이었다.</p>
</body>
</html>
</article></div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"MariaDB 문자열 합치기","date":"2020-01-21","slug":"backend/2020/mariadb-rule/index","content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003ctitle\u003eContents\u003c/title\u003e\n\u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e프로젝트를 DynamoDB와 MariaDB를 섞어서 쓰고있다.\u003cbr\u003e\n파일경로를 aws서버에서 가져와야 하기때문에 다들 DB조회 후 한 건마다 돌려서 공통 함수를 호출해서 파일 경로를 만들어줬기 때문에 나도 그렇게 해야하나 싶었다가도\u003cbr\u003e\n내가 해야할 메뉴에는 이미지가 있는 테이블이 5개 * 이미지 관련 컬럼 3~8개였기 때문에 쉬운 방법을 찾아보다가 글을 쓴다.\u003c/p\u003e\n\u003cp\u003e처음 생각했던 방법은 예를들어 Model객체에다가 getter에다가 해당 메소드를 호출해 데이터를 조합 후 보내면 되겠다 생각했다.\u003c/p\u003e\n\u003cp\u003eproperties에 경로가 지정되어있기 때문에 String fileURL이라는 변수에다가 \u003ccode\u003e$value(\"${some url\"})\u003c/code\u003e 를 선언하고 받아보니 null이였다.\u003c/p\u003e\n\u003cp\u003e그래서 두번째 시도에서는 해당 Model에다가 해당 메소드가 있는 Util객체를 @Autowired를 선언해서 하니 안됬었다.\u003c/p\u003e\n\u003cp\u003e두 방법 다 예전에 안됬던 기억이어서 혹시나하고 해봤는데 역시나였다.\u003cbr\u003e\n함수를 만들어 for문을 돌리기에는 자바가 변수가 고정적이라 일일히 수작업으로 하기에는 개발자스럽지 않은 느낌이여서 Controller에서 조회하기 전에 경로를 searchModel같은 곳에 담아두고 SQL 쿼리 상의 더해주면 쉽게 해결되겠다 싶었다!\u003c/p\u003e\n\u003cp\u003e기대와는 달리 #{filURL} + some_file_route는 계속해서 null을 반환했다.\u003cbr\u003e\n뭔가싶어 찾아보니 MariaDB는 문자열에 숫자가 있는건 숫자끼리 더하고 데이터가 null이거나 이상할때는 null을 반환했다.\u003cbr\u003e\nMariaDB는 \u003ccode\u003eCONCAT('1','2','3','4','5'...)\u003c/code\u003e 이런식으로 해야만 문자열을 합칠 수 있었다.\u003cbr\u003e\nnull값이 있으면 null로 반환되어 경로가 이상할 일은 없어 다행이었다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"}},"__N_SSG":true},"page":"/posts/[...slug]","query":{"slug":["backend","2020","mariadb-rule","index"]},"buildId":"AfQh34Lrjpt4zlooEaMIq","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>